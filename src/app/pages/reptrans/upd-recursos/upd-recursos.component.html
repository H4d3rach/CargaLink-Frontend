<div class="d-flex">
    <div [class.collapsed]="isSidebarCollapsed" class="sidebar">
        <div class="clasedeprueba">
            <span class="logospan">
                <img src="assets/iconoprincipal.png" alt="Logo" width="50" height="50">
            </span>
            @if (!isSidebarCollapsed) {
            <span class="sideTitle">CargaLink</span>
            }
        </div>
        @if (!isSidebarCollapsed) {
        <div class="bienvenida">
            <span class="bienvenida-text">Menú principal</span>
        </div>
        <hr class="bienvenida-hr">
        }
        <ul class="nav flex-column">
            <li class="nav-item sidebar-custom">
                <a routerLink="/rep_trans" style="cursor: pointer;"
                    class="nav-link d-flex align-items-center sidebar-custom-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                        class="bi bi-currency-dollar" viewBox="0 0 16 16">
                        <path
                            d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73z"
                            stroke="white" />
                    </svg>
                    @if (!isSidebarCollapsed) {
                    <span class="ms-2 text-sidebar">Cargas disponibles</span>
                    }
                </a>
            </li>
            <li class="nav-item sidebar-custom">
                <a routerLink="/rep_trans/sedes" style="cursor: pointer;"
                    class="nav-link d-flex align-items-center sidebar-custom-2">
                    <svg width="25" height="25" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M9.66531 12.0145C11.0295 12.0145 12.1353 10.8504 12.1353 9.41445C12.1353 7.97851 11.0295 6.81445 9.66531 6.81445C8.30117 6.81445 7.19531 7.97851 7.19531 9.41445C7.19531 10.8504 8.30117 12.0145 9.66531 12.0145Z"
                            stroke="white" stroke-width="1.5" />
                        <path
                            d="M3.03105 7.89784C4.59063 0.681171 14.7477 0.689504 16.2994 7.90617C17.2098 12.1395 14.7081 15.7228 12.5152 17.9395C10.924 19.5562 8.40647 19.5562 6.8073 17.9395C4.6223 15.7228 2.12063 12.1312 3.03105 7.89784Z"
                            stroke="white" stroke-width="1.5" />
                    </svg>
                    @if (!isSidebarCollapsed) {
                    <span class="ms-2 text-sidebar">Sedes</span>
                    }
                </a>
            </li>
            <li class="nav-item sidebar-custom">
                <a routerLink="/rep_trans/transportistas" style="cursor: pointer;"
                    class="nav-link d-flex align-items-center sidebar-custom-2">
                    <svg width="25" height="25" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M8.47731 8.40435C8.40896 8.39751 8.32693 8.39751 8.25174 8.40435C6.62491 8.34966 5.33301 7.01675 5.33301 5.37625C5.33301 3.70156 6.68643 2.34131 8.36794 2.34131C10.0426 2.34131 11.4029 3.70156 11.4029 5.37625C11.396 7.01675 10.1041 8.34966 8.47731 8.40435Z"
                            stroke="white" stroke-width="1.36709" stroke-linecap="round" stroke-linejoin="round" />
                        <path
                            d="M5.05899 10.9267C3.40482 12.034 3.40482 13.8386 5.05899 14.9391C6.93874 16.1968 10.0215 16.1968 11.9013 14.9391C13.5554 13.8318 13.5554 12.0272 11.9013 10.9267C10.0284 9.6758 6.94557 9.6758 5.05899 10.9267Z"
                            stroke="white" stroke-width="1.36709" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    @if (!isSidebarCollapsed) {
                    <span class="ms-2 text-sidebar">Transportistas</span>
                    }
                </a>
            </li>
            <li class="nav-item sidebar-custom">
                <a routerLink="/rep_trans/vehiculos" style="cursor: pointer;"
                    class="nav-link d-flex align-items-center sidebar-custom-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                        class="bi bi-truck" viewBox="0 0 16 16">
                        <path
                            d="M0 3.5A1.5 1.5 0 0 1 1.5 2h9A1.5 1.5 0 0 1 12 3.5V5h1.02a1.5 1.5 0 0 1 1.17.563l1.481 1.85a1.5 1.5 0 0 1 .329.938V10.5a1.5 1.5 0 0 1-1.5 1.5H14a2 2 0 1 1-4 0H5a2 2 0 1 1-3.998-.085A1.5 1.5 0 0 1 0 10.5zm1.294 7.456A2 2 0 0 1 4.732 11h5.536a2 2 0 0 1 .732-.732V3.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .294.456M12 10a2 2 0 0 1 1.732 1h.768a.5.5 0 0 0 .5-.5V8.35a.5.5 0 0 0-.11-.312l-1.48-1.85A.5.5 0 0 0 13.02 6H12zm-9 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m9 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2"
                            stroke="white" />
                    </svg>
                    @if (!isSidebarCollapsed) {
                    <span class="ms-2 text-sidebar">Vehículos</span>
                    }
                </a>
            </li>
            <li class="nav-item sidebar-custom">
                <a routerLink="/rep_trans/semirremolques" style="cursor: pointer;"
                    class="nav-link d-flex align-items-center sidebar-custom-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" class="bi bi-truck-front"
                        viewBox="0 0 16 16">
                        <path
                            d="M5 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0m8 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-6-1a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2zM4 2a1 1 0 0 0-1 1v3.9c0 .625.562 1.092 1.17.994C5.075 7.747 6.792 7.5 8 7.5s2.925.247 3.83.394A1.008 1.008 0 0 0 13 6.9V3a1 1 0 0 0-1-1zm0 1h8v3.9q0 .002 0 0l-.002.004-.005.002h-.004C11.088 6.761 9.299 6.5 8 6.5s-3.088.26-3.99.406h-.003l-.005-.002L4 6.9q0 .002 0 0z"
                            stroke="white" />
                        <path
                            d="M1 2.5A2.5 2.5 0 0 1 3.5 0h9A2.5 2.5 0 0 1 15 2.5v9c0 .818-.393 1.544-1 2v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5V14H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a2.5 2.5 0 0 1-1-2zM3.5 1A1.5 1.5 0 0 0 2 2.5v9A1.5 1.5 0 0 0 3.5 13h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 12.5 1z"
                            stroke="white" />
                    </svg>
                    @if (!isSidebarCollapsed) {
                    <span class="ms-2 text-sidebar">Semirremolques</span>
                    }
                </a>
            </li>
            <li class="nav-item sidebar-custom">
                <a routerLink="/rep_trans/trabajos" style="cursor: pointer;"
                    class="nav-link d-flex align-items-center sidebar-custom-2 active">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                        class="bi bi-clipboard-data" viewBox="0 0 16 16">
                        <path
                            d="M4 11a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0zm6-4a1 1 0 1 1 2 0v5a1 1 0 1 1-2 0zM7 9a1 1 0 0 1 2 0v3a1 1 0 1 1-2 0z"
                            stroke="white" />
                        <path
                            d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"
                            stroke="white" />
                        <path
                            d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"
                            stroke="white" />
                    </svg>
                    @if (!isSidebarCollapsed) {
                    <span class="ms-2 text-sidebar">Trabajos actuales</span>
                    }
                </a>
            </li>
            <li class="nav-item sidebar-custom">
                <a routerLink="/rep_trans/chat" style="cursor: pointer;"
                    class="nav-link d-flex align-items-center sidebar-custom-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                        class="bi bi-chat" viewBox="0 0 16 16">
                        <path
                            d="M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105"
                            stroke="white" />
                    </svg>
                    @if (!isSidebarCollapsed) {
                    <span class="ms-2 text-sidebar">Chat</span>
                    }
                </a>
            </li>
        </ul>
        <div class="close-sesion-side">
            <hr class="bienvenida-hr">
            <div class="sidebar-custom">
                <a style="cursor: pointer;" class="nav-link d-flex align-items-center sidebar-custom-2"
                    (click)="logout()">
                    <svg width="25" height="25" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M6.24805 5.96484C6.45995 3.50408 7.7245 2.49927 10.4929 2.49927H10.5817C13.6372 2.49927 14.8607 3.72281 14.8607 6.77825V11.235C14.8607 14.2904 13.6372 15.514 10.5817 15.514H10.4929C7.74501 15.514 6.48045 14.5228 6.25488 12.1031"
                            stroke="white" stroke-width="1.36709" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M10.4174 8.99976H2.63867" stroke="white" stroke-width="1.36709" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M4.1639 6.71021L1.87402 9.00008L4.1639 11.29" stroke="white" stroke-width="1.36709"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    @if (!isSidebarCollapsed) {
                    <span class="ms-2 text-sidebar">Cerrar sesión</span>
                    }
                </a>
            </div>
        </div>
    </div>

    <div class="main-content w-100">
        <div class="container-headerbar">
            <nav class="navbar">
                <button class="btn btn-outline-custom" (click)="toggleSidebar()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-list" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5" />
                    </svg>
                </button>

                <div class="navbar-right">
                    <div class="dropdown">
                        <button class="btn btn-outline-custom-2" id="dropdownUser" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                                class="bi bi-person-circle" viewBox="0 0 16 16">
                                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
                                <path fill-rule="evenodd"
                                    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1" />
                            </svg>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownUser">
                            <li><a class="dropdown-item" routerLink="/rep_trans/configuracion" style="cursor: pointer;"><svg
                                        xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-tools" viewBox="0 0 16 16">
                                        <path
                                            d="M1 0 0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.27 3.27a.997.997 0 0 0 1.414 0l1.586-1.586a.997.997 0 0 0 0-1.414l-3.27-3.27a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3q0-.405-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814zm9.646 10.646a.5.5 0 0 1 .708 0l2.914 2.915a.5.5 0 0 1-.707.707l-2.915-2.914a.5.5 0 0 1 0-.708M3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026z" />
                                    </svg><span style="margin-left: 10px;">Configuración</span></a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li (click)="logout()"><a class="dropdown-item" style="cursor: pointer;"><svg width="25"
                                        height="25" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M6.24805 5.96484C6.45995 3.50408 7.7245 2.49927 10.4929 2.49927H10.5817C13.6372 2.49927 14.8607 3.72281 14.8607 6.77825V11.235C14.8607 14.2904 13.6372 15.514 10.5817 15.514H10.4929C7.74501 15.514 6.48045 14.5228 6.25488 12.1031"
                                            stroke="black" stroke-width="1.36709" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                        <path d="M10.4174 8.99976H2.63867" stroke="black" stroke-width="1.36709"
                                            stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M4.1639 6.71021L1.87402 9.00008L4.1639 11.29" stroke="black"
                                            stroke-width="1.36709" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg><span style="margin-left: 10px;">Cerrar sesión</span></a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <!--Aqui inicia el contenido principal de la página-->
        <div class="mt-4">
            <div class="container-empresa">
                <div class="row mb-2">
                    <div
                        class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative h-100">
                        <div class="col p-4 d-flex flex-column position-static">
                            <div class="mb-3">
                                <a (click)="volver()" style="cursor: pointer;"><svg
                                        xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="black"
                                        class="bi bi-arrow-left" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd"
                                            d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8" />
                                    </svg></a>
                            </div>
                            <div class="container mb-3">
                                <h3 class="mb-3 text-center">Recursos Actuales</h3>
                                @for (recurso of recursos; track $index) {
                                    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
    
                                        <div class="col">
                                            <div class="card mb-4 rounded-3 shadow-sm h-100">
                                                <div class="card-header py-3">
                                                    <h4 class="my-0 fw-normal">Transportista</h4>
                                                </div>
                                                <div class="card-body">
                                                    <p class="card-text"><strong>Nombre:
                                                        </strong>{{recurso.transportista?.nombre}}</p>
                                                    <p class="card-text"><strong>Primer Apellido:
                                                        </strong>{{recurso.transportista?.primerApellido}}</p>
                                                    <p class="card-text"><strong>Segundo Apellido:
                                                        </strong>{{recurso.transportista?.segundoApellido}}</p>
                                                </div>
                                            </div>
                                        </div>
    
                                        <div class="col">
                                            <div class="card mb-4 rounded-3 shadow-sm h-100">
                                                <div class="card-header py-3">
                                                    <h4 class="my-0 fw-normal">Vehiculo</h4>
                                                </div>
                                                <div class="card-body">
                                                    <p class="card-text"><strong>Placas:
                                                        </strong>{{recurso.vehiculo?.placa}}</p>
                                                    <p class="card-text"><strong>Marca:
                                                        </strong>{{formatText(recurso.vehiculo?.marca)}}
                                                    </p>
                                                    <p class="card-text"><strong>Modelo:
                                                        </strong>{{recurso.vehiculo?.modelo}}</p>
                                                    <p class="card-text"><strong>Tipo:
                                                        </strong>{{formatText(recurso.vehiculo?.tipo)}}
                                                    </p>
    
                                                </div>
                                            </div>
                                        </div>
                                        @if (recurso.semirremolque) {
                                        <div class="col">
                                            <div class="card mb-4 rounded-3 shadow-sm h-100">
                                                <div class="card-header py-3">
                                                    <h4 class="my-0 fw-normal">Semirremolque</h4>
                                                </div>
                                                <div class="card-body">
                                                    <p class="card-text"><strong>Tipo:
                                                        </strong>{{formatText(recurso.semirremolque.tipo)}}</p>
                                                    <p class="card-text"><strong>Dimensiones:
                                                        </strong>{{recurso.semirremolque.largo}} x
                                                        {{recurso.semirremolque.ancho}} x {{recurso.semirremolque.alto}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        }
    
                                    </div>
                                    @if (recurso.estatus=='PROBLEMA') {
                                        <div class="mt-3">
                                            <button class="btn btn-danger" (click)="eliminarRecurso($index)">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-x-fill" viewBox="0 0 16 16">
                                                    <path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m6.146-2.854a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708"/>
                                                  </svg>
                                                Eliminar recurso
                                            </button>
                                        </div>
                                    }
                                    <hr>
                                    }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-empresa">
                @if(errorBool){
                <div class="alert alert-danger" role="alert">
                    {{errorString}}
                </div>
                }
                @if(errorLicencia){
                <div class="alert alert-danger" role="alert">
                    {{errorLicenciaString}}
                </div>
                }
                <div class="row mb-2">

                    <div class="col-md-6">
                        <div
                            class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative h-100">
                            <div class="col p-4 d-flex flex-column position-static">
                                <h3 class="mb-4">Modificar Recursos</h3>
                                <form [formGroup]="recursosForm">
                                    <div class="row mb-3">
                                        <label for="contrato" class="form-label text-registro-form">Contrato
                                            (pdf)</label>
                                        <input formControlName="contrato" class="form-control form-control-lg"
                                            id="contrato" type="file" accept=".pdf" (change)="onFileSelect($event)">
                                        @if(contract.invalid && (contract.dirty || contract.touched)){
                                        <div class="text-danger">
                                            @if (contract.errors?.['required']) {
                                            <div>Debe adjuntar el contrato</div>
                                            }
                                        </div>
                                        }
                                    </div>
                                    <hr class="mt-5">
                                    @if (isTransTurn) {
                                    <h4 class="mb-3">Transportista</h4>
                                    <select formControlName="transportista" class="form-select form-select-md mb-3"
                                        id="transportista" aria-label=".form-select-md example"
                                        (change)="onChange($event)">
                                        @for (trans of transportistaList; track $index) {
                                        <option value={{trans.idUsuario}}>{{trans.idUsuario}} {{trans.nombre}}
                                            {{trans.primerApellido}}</option>
                                        }
                                    </select>
                                    }
                                    @else if(isVehiculoTurn){
                                    <h4 class="mb-3">Vehiculo</h4>
                                    <select formControlName="vehiculo" class="form-select form-select-md mb-3"
                                        id="vehiculo" aria-label=".form-select-md example" (change)="onChangeV($event)">
                                        @for (vehiculo of vehiculosList; track $index) {
                                        <option value={{vehiculo.placa}}>{{vehiculo.placa}}</option>
                                        }
                                    </select>
                                    }@else if(isSemiTurn){
                                    <h4 class="mb-3">Semirremolque</h4>
                                    <select formControlName="semirremolque" class="form-select form-select-md mb-3"
                                        id="semirremolque" aria-label=".form-select-md example"
                                        (change)="onChangeS($event)">
                                        @for (semi of semirremolqueList; track $index) {
                                        <option value={{semi.idSemirremolque}}>{{semi.nombreIdentificador}}</option>
                                        }
                                    </select>
                                    }
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div
                            class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative h-100">
                            <div class="col p-4 d-flex flex-column position-static">
                                @if (isTransTurn && transportista) {
                                <h3 class="mb-4">Transportista</h3>
                                <div class="row mb-3">
                                    <label for="transName"
                                        class="form-label form-texto text-registro-form">Nombre</label>
                                    <input
                                        [value]="transportista.nombre + ' ' + transportista.primerApellido + ' ' + transportista.segundoApellido"
                                        class="form-control" id="transName" aria-label="precioFinal" readonly>
                                </div>
                                <div class="row mb-3">
                                    <div class="col">
                                        <label for="transCategoria"
                                            class="form-label form-texto text-registro-form">Tipo de licencia</label>
                                        <input [value]="transportista.categoria" class="form-control"
                                            id="transCategoria" aria-label="precioFinal" readonly>
                                    </div>
                                    <div class="col">
                                        <label for="transEstatus"
                                            class="form-label form-texto text-registro-form">Estatus</label>
                                        <input [value]="transportista.estatusTransportista" class="form-control"
                                            id="transEstatus" aria-label="precioFinal" readonly>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="transSede" class="form-label form-texto text-registro-form">Sede</label>
                                    <input [value]="transportista.sede.nombre" class="form-control" id="transSede"
                                        aria-label="precioFinal" readonly>
                                </div>
                                <button class="btn btn-new2" (click)="agregarTrans()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                        class="bi bi-clipboard-plus" viewBox="0 0 16 16" style="margin-right: 10px;">
                                        <path fill-rule="evenodd"
                                            d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7" />
                                        <path
                                            d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z" />
                                        <path
                                            d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z" />
                                    </svg>Agregar Transportista</button>
                                }
                                @else if (isVehiculoTurn && vehiculo) {
                                @if(isUnitary == false){
                                <h3 class="mb-4">Vehiculo</h3>
                                <div class="row mb-3">
                                    <div class="col">
                                        <label for="vehiculoMarca"
                                            class="form-label form-texto text-registro-form">Marca</label>
                                        <input [value]="vehiculo.marca" class="form-control" id="vehiculoMarca"
                                            aria-label="precioFinal" readonly>
                                    </div>
                                    <div class="col">
                                        <label for="vehiculoModelo"
                                            class="form-label form-texto text-registro-form">Modelo</label>
                                        <input [value]="vehiculo.modelo" class="form-control" id="vehiculoModelo"
                                            aria-label="precioFinal" readonly>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="vehiculoTipo"
                                        class="form-label form-texto text-registro-form">Tipo</label>
                                    <input [value]="vehiculo.tipo" class="form-control" id="vehiculoTipo"
                                        aria-label="precioFinal" readonly>
                                </div>
                                <div class="row mb-3">
                                    <label for="vehiculoEstatus"
                                        class="form-label form-texto text-registro-form">Estatus</label>
                                    <input [value]="vehiculo.estatus" class="form-control" id="vehiculoEstatus"
                                        aria-label="precioFinal" readonly>
                                </div>
                                <div class="row mb-3">
                                    <label for="vehiculoSede"
                                        class="form-label form-texto text-registro-form">Sede</label>
                                    <input [value]="vehiculo.sede.nombre" class="form-control" id="vehiculoSede"
                                        aria-label="precioFinal" readonly>
                                </div>
                                <button class="btn btn-new2" (click)="agregarVehiculo()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                        class="bi bi-clipboard-plus" viewBox="0 0 16 16" style="margin-right: 10px;">
                                        <path fill-rule="evenodd"
                                            d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7" />
                                        <path
                                            d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z" />
                                        <path
                                            d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z" />
                                    </svg>Agregar Vehículo</button>
                                }
                                @else if(isUnitary){
                                <h3 class="mb-4">Opciones</h3>
                                @if (errorBool) {
                                <button class="btn btn-new2" (click)="addOtherUni()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                        class="bi bi-clipboard-plus" viewBox="0 0 16 16" style="margin-right: 10px;">
                                        <path fill-rule="evenodd"
                                            d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7" />
                                        <path
                                            d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z" />
                                        <path
                                            d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z" />
                                    </svg>Agregar otro recurso</button>
                                <button class="btn btn-danger" (click)="borrarRecursos()">Borrar recursos
                                    asignados</button>
                                }
                                @else {
                                <button class="btn btn-publicar" (click)="publicarUni()"><svg width="20" height="19"
                                        viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                            d="M11.3961 1.02996C11.75 0.676008 12.2238 0.467628 12.7238 0.445967C13.2239 0.424306 13.7139 0.590937 14.0971 0.912957L14.2241 1.02996L18.4671 5.27296C18.8208 5.62682 19.029 6.10038 19.0506 6.6002C19.0723 7.10003 18.9058 7.58983 18.5841 7.97296L18.4671 8.10096L8.15309 18.415C7.82107 18.747 7.38282 18.9516 6.91509 18.993L6.73909 19H1.50609C1.25727 19 1.0172 18.9081 0.831923 18.742C0.646643 18.5759 0.529193 18.3473 0.502094 18.1L0.496094 17.99V12.757C0.496208 12.2874 0.661528 11.8329 0.963094 11.473L1.08309 11.343L11.3961 1.02996ZM9.67009 5.58396L2.49609 12.758V17H6.74009L13.9141 9.82596L9.67109 5.58296L9.67009 5.58396ZM12.8101 2.44396L11.0841 4.16996L15.3271 8.41296L17.0531 6.68696L12.8101 2.44396Z"
                                            fill="white" />
                                    </svg>
                                    Terminar Configuración</button>
                                <button class="btn btn-new2" (click)="addOtherUni()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                        class="bi bi-clipboard-plus" viewBox="0 0 16 16" style="margin-right: 10px;">
                                        <path fill-rule="evenodd"
                                            d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7" />
                                        <path
                                            d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z" />
                                        <path
                                            d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z" />
                                    </svg>Agregar Otro recurso</button>
                                }
                                }
                                }
                                @else if (isSemiTurn && semi) {
                                @if (isFinally == false) {
                                <h3 class="mb-4">Semirremolque</h3>
                                <div class="row mb-3">
                                    <label for="semiTipo" class="form-label form-texto text-registro-form">Tipo</label>
                                    <input [value]="semi.tipo" class="form-control" id="semiTipo"
                                        aria-label="precioFinal" readonly>
                                </div>
                                <div class="row mb-3">
                                    <label for="semiDimensiones"
                                        class="form-label form-texto text-registro-form">Dimensiones</label>
                                    <input [value]="semi.largo+ ' x ' +semi.ancho+' x '+semi.alto" class="form-control"
                                        id="semiDimensiones" aria-label="precioFinal" readonly>
                                </div>
                                <div class="row mb-3">
                                    <label for="semiEstatus"
                                        class="form-label form-texto text-registro-form">Estatus</label>
                                    <input [value]="semi.estatus" class="form-control" id="semiEstatus"
                                        aria-label="precioFinal" readonly>
                                </div>
                                <div class="row mb-3">
                                    <label for="semiSede" class="form-label form-texto text-registro-form">Sede</label>
                                    <input [value]="semi.sede.nombre" class="form-control" id="semiSede"
                                        aria-label="precioFinal" readonly>
                                </div>
                                <button class="btn btn-new2" (click)="agregarSemi()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                        class="bi bi-clipboard-plus" viewBox="0 0 16 16" style="margin-right: 10px;">
                                        <path fill-rule="evenodd"
                                            d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7" />
                                        <path
                                            d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z" />
                                        <path
                                            d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z" />
                                    </svg>Agregar Semirremolque</button>
                                }@else if (isFinally) {
                                <h3 class="mb-4">Opciones</h3>
                                <button class="btn btn-publicar" (click)="publicarSemi()"><svg width="20" height="19"
                                        viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                            d="M11.3961 1.02996C11.75 0.676008 12.2238 0.467628 12.7238 0.445967C13.2239 0.424306 13.7139 0.590937 14.0971 0.912957L14.2241 1.02996L18.4671 5.27296C18.8208 5.62682 19.029 6.10038 19.0506 6.6002C19.0723 7.10003 18.9058 7.58983 18.5841 7.97296L18.4671 8.10096L8.15309 18.415C7.82107 18.747 7.38282 18.9516 6.91509 18.993L6.73909 19H1.50609C1.25727 19 1.0172 18.9081 0.831923 18.742C0.646643 18.5759 0.529193 18.3473 0.502094 18.1L0.496094 17.99V12.757C0.496208 12.2874 0.661528 11.8329 0.963094 11.473L1.08309 11.343L11.3961 1.02996ZM9.67009 5.58396L2.49609 12.758V17H6.74009L13.9141 9.82596L9.67109 5.58296L9.67009 5.58396ZM12.8101 2.44396L11.0841 4.16996L15.3271 8.41296L17.0531 6.68696L12.8101 2.44396Z"
                                            fill="white" />
                                    </svg>
                                    Terminar Configuración</button>
                                <button class="btn btn-new2" (click)="addOtherSemi()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                        class="bi bi-clipboard-plus" viewBox="0 0 16 16" style="margin-right: 10px;">
                                        <path fill-rule="evenodd"
                                            d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7" />
                                        <path
                                            d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z" />
                                        <path
                                            d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z" />
                                    </svg>Agregar Otro recurso</button>
                                }
                                }
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="album py-4 bg-body-tertiary mt-4">
                <div class="container"> <!--Se mostraán las cargas que haz registrado-->
                    <h3 class="mb-3 text-center">Nuevos recursos agregados</h3>
                    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                        @for (recurso of allResources; track $index) {
                        @if (isTransportista(recurso)) {
                        <div class="col">
                            <div class="card mb-4 rounded-3 shadow-sm h-100">
                                <div class="card-header py-3">
                                    <h4 class="my-0 fw-normal">Transportista</h4>
                                </div>
                                <div class="card-body">
                                    <p class="card-text"><strong>Nombre: </strong>{{recurso.nombre}}
                                        {{recurso.primerApellido}} {{recurso.segundoApellido}}</p>
                                    <p class="card-text"><strong>Tipo de licencia: </strong>{{recurso.categoria}}</p>
                                    <p class="card-text"><strong>Sede: </strong>{{recurso.sede.nombre}}</p>
                                </div>
                            </div>
                        </div>
                        }@else if (isVehiculo(recurso)) {
                        <div class="col">
                            <div class="card mb-4 rounded-3 shadow-sm h-100">
                                <div class="card-header py-3">
                                    <h4 class="my-0 fw-normal">Vehiculo</h4>
                                </div>
                                <div class="card-body">
                                    <p class="card-text"><strong>Marca: </strong>{{recurso.marca}}</p>
                                    <p class="card-text"><strong>Modelo: </strong>{{recurso.modelo}}</p>
                                    <p class="card-text"><strong>Tipo: </strong>{{recurso.tipo}}</p>
                                    <p class="card-text"><strong>Sede: </strong>{{recurso.sede.nombre}}</p>
                                </div>
                            </div>
                        </div>
                        }@else if (isSemirremolque(recurso)) {
                        <div class="col">
                            <div class="card mb-4 rounded-3 shadow-sm h-100">
                                <div class="card-header py-3">
                                    <h4 class="my-0 fw-normal">Semirremolque</h4>
                                </div>
                                <div class="card-body">
                                    <p class="card-text"><strong>Tipo: </strong>{{recurso.tipo}}</p>
                                    <p class="card-text"><strong>Dimensiones: </strong>{{recurso.largo}} x
                                        {{recurso.ancho}} x {{recurso.alto}}</p>
                                    <p class="card-text"><strong>Sede: </strong>{{recurso.sede.nombre}}</p>
                                </div>
                            </div>
                        </div>
                        }
                        }

                    </div>
                </div>
            </div>

            <div class="chatbot-container">
                <button class="chatbot-button" (click)="funcionChat()">
                    <img src="assets/icono_chatbot.png" alt="Imagen del chatbot" class="chatbot-img">
                </button>
            </div>
            @if (chatOpen) {
                <div class="chat-window">
                    <div class="chat-header">
                      <h5>Chatbot</h5>
                      <a (click)="funcionChat()" style="cursor: pointer;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-x-lg"
                          viewBox="0 0 16 16">
                          <path
                            d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
                        </svg>
                      </a>
                    </div>
                    <div class="chat-body">
                      <div class="message chabot-message">
                        <img src="assets/icono_chatbot.png" class="chatbot-avatar">
                        <div class="message-content">
                          <p>Hola, ¿Cómo puedo ayudarte hoy?</p>
                        </div>
                      </div>
                      <hr>
                      @for (msj of historialMensajesChatbot; track $index) {
                      <div class="message user-message"
                        [ngClass]="{'user-message':msj.clase=== 'usuario', 'chabot-message':msj.clase==='bot'}">
                        @if (msj.clase === 'usuario') {
                        <img src="assets/user_chatbot.png" class="user-avatar">
                        }@else {
                        <img src="assets/icono_chatbot.png" class="user-avatar">
                        }
                        <div class="message-content">
                          <p>{{msj.msj}}</p>
                        </div>
                      </div>
                      }
                    </div>
                    <div class="chat-footer">
                      <input type="text" placeholder="Escribe tu mensaje..." class="form-control" [(ngModel)]="preguntaChat">
                      <button class="btn btn-dark" (click)="preguntarChat()">Enviar</button>
                    </div>
                  </div>
            }
        </div>
    </div>
</div>